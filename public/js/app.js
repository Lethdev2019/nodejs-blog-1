!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){window.LoginPage=require("./views/loginHandler"),window.BlogEditorPage=require("./views/blog_editor_handler"),window.PopupPage=require("./util/popupHandler"),window.FeaturedBlog=require("./views/addFeaturedBlogHandler")},{"./util/popupHandler":4,"./views/addFeaturedBlogHandler":5,"./views/blog_editor_handler":6,"./views/loginHandler":7}],2:[function(require,module,exports){var qs=require("querystring");module.exports={makeAjaxRequest:function(url,query,method,dataType,data,callback){if(!url)return!1;url=qs.stringify(query)?url+"?"+qs.stringify(query):url;var reqObj={url:url,method:method,dataType:dataType,data:data,success:function(res){callback(res)},error:function(err){callback(err)}};$.ajax(reqObj)}}},{querystring:12}],3:[function(require,module,exports){module.exports={validateForm:function(formId){function markError(element,errorMsgId){return $(formId).find("."+errorMsgId).show(),element.addClass("error"),status=!1,!1}function unMarkError(element,errorMsgId){$(formId).find("."+errorMsgId).hide(),element.removeClass("error")}function validateFieldType(fieldType,element,elementVal,errorMsgId){return"function"==typeof _this[fieldType]&&(_this[fieldType](elementVal,element)?unMarkError(element,errorMsgId):markError(element,errorMsgId))}var _this=this,status=!0;return $(formId+" .required").each(function(){var element=$(this),elementVal=$(this).val(),errorMsgId=element.attr("data-errormsg"),validateList=element.attr("data-groupname"),isElementsNeedValidation=!1;if(""===elementVal&&!validateList)return void markError(element,errorMsgId);$.each(_this.getAllFieldsToValidate(),function(index,value){element.hasClass(value)&&(isElementsNeedValidation=!0,validateFieldType(value,element,elementVal,errorMsgId))}),isElementsNeedValidation||unMarkError(element,errorMsgId)}),status},getAllFieldsToValidate:function(){return["isValidEmail","isValidMobileNumber","isNumber","isLengthOk","numberInRange","isValidResetPassword","isEqualTo","isCardNo","validateList"]},isNumber:function(input){return!isNaN(input)},numberInRange:function(input,element){var inputInt=Number(input),min=$(element).data("min"),max=$(element).data("max");return!!this.isNumber(input)&&(inputInt>=min&&inputInt<=max)},isLengthOk:function(input,element){var minLength=element.data("minlength"),maxLength=element.prop("maxlength");return input.length>=minLength&&input.length<=maxLength},isValidEmail:function(email){return/^[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}$/.test(email)},isValidUserName:function(userName){return userName=userName.trim(),userName.length>=4},isValidAmount:function(amount){return/^[1-9]\d+$/.test(amount)},isValidMobileNumber:function(mobileNumber){var mobileNumberTrimmed=mobileNumber.trim(),specialCharRegex=/^[\w{.\/\\(),'}:?®©-]+$/,isValidNumber=mobileNumberTrimmed>0,hasSpecialChars=specialCharRegex.test(mobileNumberTrimmed),isSatisfyLenth=mobileNumberTrimmed.length>=10;return isValidNumber&&hasSpecialChars&&isSatisfyLenth},isEqualTo:function(password,element){var equalField=element.data("equalto");return $(equalField).val()===password},isCardNo:function(input,element){var inputEdited=input.replace(/ /g,""),minLength=element.data("minlength"),maxLength=element.prop("maxlength");return inputEdited.length>=minLength&&inputEdited.length<=maxLength},validateList:function(input,element){var groupName=element.data("groupname"),status=!1;return $('[name="'+groupName+'"]').each(function(){if($(this).is(":checked"))return void(status=!0)}),status}}},{}],4:[function(require,module,exports){module.exports=function(){function bindClickEvents(){$(".cd-popup-trigger").off("click").on("click",function(event){event.preventDefault(),$("body").addClass("popup-visible"),$(".cd-popup").addClass("is-visible")}),$(".cd-popup").off("click").on("click",function(event){($(event.target).is(".cd-popup-close")||$(event.target).is(".cd-popup-close-icon")||$(event.target).is(".cd-popup"))&&(event.preventDefault(),$("body").removeClass("popup-visible"),$(this).removeClass("is-visible"))}),$(document).keyup(function(event){"27"==event.which&&($("body").removeClass("popup-visible"),$(".cd-popup").removeClass("is-visible"))})}return{init:function(html,theme,cb){$("#windowPopup").remove();var tmpl=Handlebars.partials.popup;$("body").append(tmpl({html:html,theme:theme})),bindClickEvents(),cb&&cb()},close:function(){$("#windowPopup").remove()}}}()},{}],5:[function(require,module,exports){var ApiUtil=require("../util/apiUtil"),FormValidator=require("../util/formValidator");module.exports=function(){function postData(obj){var callback=function(data){var formEle=$("#jsForm");data.err?(formEle.find(".js_server_error").removeClass("hide"),formEle.find(".js_server_error_msg").html(data.msg)):window.location.href="/view/featured-blog"};ApiUtil.makeAjaxRequest("/api/post/featured-blog","","POST","",obj,callback)}function updateData(obj,_id){var callback=function(data){var formEle=$("#jsForm");data.err?(formEle.find(".js_server_error").removeClass("hide"),formEle.find(".js_server_error_msg").html(data.msg)):window.location.href="/view/featured-blog"};ApiUtil.makeAjaxRequest("/api/post/featured-blog/update/"+_id,"","POST","",obj,callback)}return{init:function(){$("#jsForm").submit(function(e){if(e.preventDefault(),FormValidator.validateForm("#jsForm")){postData({title:$(".js_heading").val(),blogs:$(".js_blogs").val()})}return!1}),$(".js_new_tag").on("click",function(){$(".js_new_tag_sec_wrap").append('<input type="text" class="form-control js_tag"><br/>')}),$(".js_new_gallery").on("click",function(){$(".js_new_gallery_image_sec_wrap").append('<input type="text" class="form-control js_gallery_img"><br/>')}),$(".js_blogs").select2({tags:!0})},initEditForm:function(){$("#jsForm").submit(function(e){if(e.preventDefault(),FormValidator.validateForm("#jsForm")){updateData({title:$(".js_heading").val(),blogs:$(".js_blogs").val()},$(".js_id").val())}return!1}),$(".js_new_tag").on("click",function(){$(".js_new_tag_sec_wrap").append('<input type="text" class="form-control js_tag"><br/>')}),$(".js_new_gallery").on("click",function(){$(".js_new_gallery_image_sec_wrap").append('<input type="text" class="form-control js_gallery_img"><br/>')}),$(".js_blogs").select2({tags:!0})}}}()},{"../util/apiUtil":2,"../util/formValidator":3}],6:[function(require,module,exports){var apiUtils=require("../util/apiUtil"),formValidator=require("../util/formValidator"),async=require("async");module.exports=function(){function submitBlog(_form_error,_obj){var _blog_id=$(".js_blog_id").val(),_callback=function(data){data.err?(_form_error.removeClass("hide"),_form_error.find(".js_error").html(data.msg)):window.location.href="/blogs"};_blog_id?apiUtils.makeAjaxRequest("/api/update/blog/"+_blog_id,"","POST","",_obj,_callback):apiUtils.makeAjaxRequest("/api/blog/upload","","POST","",_obj,_callback)}function blogFormEvents(){$(".js_desc").textcounter({max:140,countDown:!0}),$("#filePhoto").change(function(){readURL(this)}),$("#blogBasicDetails").submit(function(e){e.preventDefault();var _form=$("#blogBasicDetails"),_form_error=$(".js_server_error"),cover_img=$("#previewHolder"),dataString=cover_img.attr("src"),matches=dataString.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/);if(formValidator.validateForm("#blogBasicDetails")){$(".medium-insert-buttons").remove();var _img_obj={src:dataString},_obj={url:_form.find(".j_url").val(),title:_form.find(".j_title").val(),desc:$(".medium-editor-element").html(),small_desc:_form.find(".js_desc").val(),cover_img:"",tags:_form.find(".js_page_tags").val(),meta_keywords:_form.find(".js_meta_keywords").val()};if(matches&&3===matches.length){var _img_callback=function(data){data.err||(_obj.cover_img=data.data.path),submitBlog(_form_error,_obj)};apiUtils.makeAjaxRequest("/api/blog/image-upload","","POST","",_img_obj,_img_callback)}else _obj.cover_img=dataString,submitBlog(_form_error,_obj)}}),$(".js_close_drawer").off("click").on("click",function(){$(".js_blog_form_sec").toggleClass("inactive")})}function readURL(input){if(input.files&&input.files[0]){var reader=new FileReader;reader.onload=function(e){$("#previewHolder").removeClass("hide").attr("src",e.target.result)},reader.readAsDataURL(input.files[0])}}function clickNewBlogEvents(){$(".js_publish_blog").on("click",function(){var _eleArr=$(".medium-editor-element").find("figure img");async.forEachOf(_eleArr,function(value,key,callback){var _this=value,dataString=value.src,matches=dataString.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/);if(value.src&&matches&&3===matches.length){var _obj={src:value.src},_callback=function(data){data.err||(_this.src=data.data.path),callback(null,[])};apiUtils.makeAjaxRequest("/api/blog/image-upload","","POST","",_obj,_callback)}else callback(null,[])},function(err,results){$("#blogBasicDetails").submit()})})}function initEditor(){var title=new MediumEditor(".title",{placeholder:{text:"Star writing your blog here",hideOnClick:!1},toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h1","h2","h3","h4","quote","orderedlist","unorderedlist"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",relativeContainer:null,standardizeSelectionStart:!1,static:!1,align:"center",sticky:!1,updateOnEmptySelection:!1}});$(".title").mediumInsert({editor:title,addons:{images:{uploadScript:null,deleteScript:null,captionPlaceholder:"Type caption for image",styles:{slideshow:{label:'<span class="fa fa-play"></span>',added:function($el){$el.data("cycle-center-vert",!0).cycle({slides:"figure"})},removed:function($el){$el.cycle("destroy")}}},actions:null}}})}return{init:function(){clickNewBlogEvents(),blogFormEvents(),initEditor(),$(".js_tags").select2({tags:!0})},initEdit:function(){clickNewBlogEvents(),blogFormEvents(),initEditor(),$(".js_tags").select2({tags:!0})}}}()},{"../util/apiUtil":2,"../util/formValidator":3,async:8}],7:[function(require,module,exports){var ApiUtil=require("../util/apiUtil"),FormValidator=require("../util/formValidator");module.exports=function(){function postLogin(obj){var callback=function(data){var formEle=$("#jsForm");data&&data.hasOwnProperty("name")?window.location.href="/":(formEle.find(".js_server_error").removeClass("hide"),formEle.find(".js_server_error_msg").html(data.msg))};ApiUtil.makeAjaxRequest("/api/user/login","","POST","",obj,callback)}function postSignUp(obj){var callback=function(data){var formEle=$("#jsSignUpForm");data.err?(formEle.find(".js_server_error").removeClass("hide"),formEle.find(".js_server_error_msg").html(data.msg)):window.location.href="/"};ApiUtil.makeAjaxRequest("/api/user/register","","POST","",obj,callback)}return{init:function(){$(".js_user_password").on("keypress",function(e){if(13===(event.keyCode?event.keyCode:event.which))return e.preventDefault(),FormValidator.validateForm("#jsLoginForm")&&postLogin({username:$(".js_user_name").val(),password:$(".js_user_password").val()}),!1}),$("#jsLoginForm").submit(function(e){if(e.preventDefault(),FormValidator.validateForm("#jsLoginForm")){postLogin({username:$(".js_user_name").val(),password:$(".js_user_password").val()})}return!1})},initSignUp:function(){$("#jsSignUpForm").submit(function(e){if(e.preventDefault(),FormValidator.validateForm("#jsSignUpForm")){postSignUp({name:$(".js_user_name").val(),email:$(".js_user_email").val(),password:$(".js_user_password").val()})}return!1})}}}()},{"../util/apiUtil":2,"../util/formValidator":3}],8:[function(require,module,exports){(function(process,global){!function(){function noop(){}function identity(v){return v}function toBool(v){return!!v}function notId(v){return!v}function only_once(fn){return function(){if(null===fn)throw new Error("Callback was already called.");fn.apply(this,arguments),fn=null}}function _once(fn){return function(){null!==fn&&(fn.apply(this,arguments),fn=null)}}function _isArrayLike(arr){return _isArray(arr)||"number"==typeof arr.length&&arr.length>=0&&arr.length%1==0}function _arrayEach(arr,iterator){for(var index=-1,length=arr.length;++index<length;)iterator(arr[index],index,arr)}function _map(arr,iterator){for(var index=-1,length=arr.length,result=Array(length);++index<length;)result[index]=iterator(arr[index],index,arr);return result}function _range(count){return _map(Array(count),function(v,i){return i})}function _reduce(arr,iterator,memo){return _arrayEach(arr,function(x,i,a){memo=iterator(memo,x,i,a)}),memo}function _forEachOf(object,iterator){_arrayEach(_keys(object),function(key){iterator(object[key],key)})}function _indexOf(arr,item){for(var i=0;i<arr.length;i++)if(arr[i]===item)return i;return-1}function _keyIterator(coll){var len,keys,i=-1;return _isArrayLike(coll)?(len=coll.length,function(){return i++,i<len?i:null}):(keys=_keys(coll),len=keys.length,function(){return i++,i<len?keys[i]:null})}function _restParam(func,startIndex){return startIndex=null==startIndex?func.length-1:+startIndex,function(){for(var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;index<length;index++)rest[index]=arguments[index+startIndex];switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest)}}}function _withoutIndex(iterator){return function(value,index,callback){return iterator(value,callback)}}function _eachOfLimit(limit){return function(obj,iterator,callback){callback=_once(callback||noop),obj=obj||[];var nextKey=_keyIterator(obj);if(limit<=0)return callback(null);var done=!1,running=0,errored=!1;!function replenish(){if(done&&running<=0)return callback(null);for(;running<limit&&!errored;){var key=nextKey();if(null===key)return done=!0,void(running<=0&&callback(null));running+=1,iterator(obj[key],key,only_once(function(err){running-=1,err?(callback(err),errored=!0):replenish()}))}}()}}function doParallel(fn){return function(obj,iterator,callback){return fn(async.eachOf,obj,iterator,callback)}}function doParallelLimit(fn){return function(obj,limit,iterator,callback){return fn(_eachOfLimit(limit),obj,iterator,callback)}}function doSeries(fn){return function(obj,iterator,callback){return fn(async.eachOfSeries,obj,iterator,callback)}}function _asyncMap(eachfn,arr,iterator,callback){callback=_once(callback||noop),arr=arr||[];var results=_isArrayLike(arr)?[]:{};eachfn(arr,function(value,index,callback){iterator(value,function(err,v){results[index]=v,callback(err)})},function(err){callback(err,results)})}function _filter(eachfn,arr,iterator,callback){var results=[];eachfn(arr,function(x,index,callback){iterator(x,function(v){v&&results.push({index:index,value:x}),callback()})},function(){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})}function _reject(eachfn,arr,iterator,callback){_filter(eachfn,arr,function(value,cb){iterator(value,function(v){cb(!v)})},callback)}function _createTester(eachfn,check,getResult){return function(arr,limit,iterator,cb){function done(){cb&&cb(getResult(!1,void 0))}function iteratee(x,_,callback){if(!cb)return callback();iterator(x,function(v){cb&&check(v)&&(cb(getResult(!0,x)),cb=iterator=!1),callback()})}arguments.length>3?eachfn(arr,limit,iteratee,done):(cb=iterator,iterator=limit,eachfn(arr,iteratee,done))}}function _findGetResult(v,x){return x}function _parallel(eachfn,tasks,callback){callback=callback||noop;var results=_isArrayLike(tasks)?[]:{};eachfn(tasks,function(task,key,callback){task(_restParam(function(err,args){args.length<=1&&(args=args[0]),results[key]=args,callback(err)}))},function(err){callback(err,results)})}function _concat(eachfn,arr,fn,callback){var result=[];eachfn(arr,function(x,index,cb){fn(x,function(err,y){result=result.concat(y||[]),cb(err)})},function(err){callback(err,result)})}function _queue(worker,concurrency,payload){function _insert(q,data,pos,callback){if(null!=callback&&"function"!=typeof callback)throw new Error("task callback must be a function");if(q.started=!0,_isArray(data)||(data=[data]),0===data.length&&q.idle())return async.setImmediate(function(){q.drain()});_arrayEach(data,function(task){var item={data:task,callback:callback||noop};pos?q.tasks.unshift(item):q.tasks.push(item),q.tasks.length===q.concurrency&&q.saturated()}),async.setImmediate(q.process)}function _next(q,tasks){return function(){workers-=1;var removed=!1,args=arguments;_arrayEach(tasks,function(task){_arrayEach(workersList,function(worker,index){worker!==task||removed||(workersList.splice(index,1),removed=!0)}),task.callback.apply(task,args)}),q.tasks.length+workers===0&&q.drain(),q.process()}}if(null==concurrency)concurrency=1;else if(0===concurrency)throw new Error("Concurrency must not be zero");var workers=0,workersList=[],q={tasks:[],concurrency:concurrency,payload:payload,saturated:noop,empty:noop,drain:noop,started:!1,paused:!1,push:function(data,callback){_insert(q,data,!1,callback)},kill:function(){q.drain=noop,q.tasks=[]},unshift:function(data,callback){_insert(q,data,!0,callback)},process:function(){for(;!q.paused&&workers<q.concurrency&&q.tasks.length;){var tasks=q.payload?q.tasks.splice(0,q.payload):q.tasks.splice(0,q.tasks.length),data=_map(tasks,function(task){return task.data});0===q.tasks.length&&q.empty(),workers+=1,workersList.push(tasks[0]);var cb=only_once(_next(q,tasks));worker(data,cb)}},length:function(){return q.tasks.length},running:function(){return workers},workersList:function(){return workersList},idle:function(){return q.tasks.length+workers===0},pause:function(){q.paused=!0},resume:function(){if(!1!==q.paused){q.paused=!1;for(var resumeCount=Math.min(q.concurrency,q.tasks.length),w=1;w<=resumeCount;w++)async.setImmediate(q.process)}}};return q}function _console_fn(name){return _restParam(function(fn,args){fn.apply(null,args.concat([_restParam(function(err,args){"object"==typeof console&&(err?console.error:console[name]&&_arrayEach(args,function(x){}))})]))})}function _times(mapper){return function(count,iterator,callback){mapper(_range(count),iterator,callback)}}function _applyEach(eachfn){return _restParam(function(fns,args){var go=_restParam(function(args){var that=this,callback=args.pop();return eachfn(fns,function(fn,_,cb){fn.apply(that,args.concat([cb]))},callback)});return args.length?go.apply(this,args):go})}function ensureAsync(fn){return _restParam(function(args){var callback=args.pop();args.push(function(){var innerArgs=arguments;sync?async.setImmediate(function(){callback.apply(null,innerArgs)}):callback.apply(null,innerArgs)});var sync=!0;fn.apply(this,args),sync=!1})}var previous_async,async={},root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=root&&(previous_async=root.async),async.noConflict=function(){return root.async=previous_async,async};var _toString=Object.prototype.toString,_isArray=Array.isArray||function(obj){return"[object Array]"===_toString.call(obj)},_isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_keys=Object.keys||function(obj){var keys=[];for(var k in obj)obj.hasOwnProperty(k)&&keys.push(k);return keys},_setImmediate="function"==typeof setImmediate&&setImmediate,_delay=_setImmediate?function(fn){_setImmediate(fn)}:function(fn){setTimeout(fn,0)};"object"==typeof process&&"function"==typeof process.nextTick?async.nextTick=process.nextTick:async.nextTick=_delay,async.setImmediate=_setImmediate?_delay:async.nextTick,async.forEach=async.each=function(arr,iterator,callback){return async.eachOf(arr,_withoutIndex(iterator),callback)},async.forEachSeries=async.eachSeries=function(arr,iterator,callback){return async.eachOfSeries(arr,_withoutIndex(iterator),callback)},async.forEachLimit=async.eachLimit=function(arr,limit,iterator,callback){return _eachOfLimit(limit)(arr,_withoutIndex(iterator),callback)},async.forEachOf=async.eachOf=function(object,iterator,callback){function done(err){completed--,err?callback(err):null===key&&completed<=0&&callback(null)}callback=_once(callback||noop),object=object||[];for(var key,iter=_keyIterator(object),completed=0;null!=(key=iter());)completed+=1,iterator(object[key],key,only_once(done));0===completed&&callback(null)},async.forEachOfSeries=async.eachOfSeries=function(obj,iterator,callback){function iterate(){var sync=!0;if(null===key)return callback(null);iterator(obj[key],key,only_once(function(err){if(err)callback(err);else{if(null===(key=nextKey()))return callback(null);sync?async.setImmediate(iterate):iterate()}})),sync=!1}callback=_once(callback||noop),obj=obj||[];var nextKey=_keyIterator(obj),key=nextKey();iterate()},async.forEachOfLimit=async.eachOfLimit=function(obj,limit,iterator,callback){_eachOfLimit(limit)(obj,iterator,callback)},async.map=doParallel(_asyncMap),async.mapSeries=doSeries(_asyncMap),async.mapLimit=doParallelLimit(_asyncMap),async.inject=async.foldl=async.reduce=function(arr,memo,iterator,callback){async.eachOfSeries(arr,function(x,i,callback){iterator(memo,x,function(err,v){memo=v,callback(err)})},function(err){callback(err,memo)})},async.foldr=async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,identity).reverse();async.reduce(reversed,memo,iterator,callback)},async.transform=function(arr,memo,iterator,callback){3===arguments.length&&(callback=iterator,iterator=memo,memo=_isArray(arr)?[]:{}),async.eachOf(arr,function(v,k,cb){iterator(memo,v,k,cb)},function(err){callback(err,memo)})},async.select=async.filter=doParallel(_filter),async.selectLimit=async.filterLimit=doParallelLimit(_filter),async.selectSeries=async.filterSeries=doSeries(_filter),async.reject=doParallel(_reject),async.rejectLimit=doParallelLimit(_reject),async.rejectSeries=doSeries(_reject),async.any=async.some=_createTester(async.eachOf,toBool,identity),async.someLimit=_createTester(async.eachOfLimit,toBool,identity),async.all=async.every=_createTester(async.eachOf,notId,notId),async.everyLimit=_createTester(async.eachOfLimit,notId,notId),async.detect=_createTester(async.eachOf,identity,_findGetResult),async.detectSeries=_createTester(async.eachOfSeries,identity,_findGetResult),async.detectLimit=_createTester(async.eachOfLimit,identity,_findGetResult),async.sortBy=function(arr,iterator,callback){function comparator(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0}async.map(arr,function(x,callback){iterator(x,function(err,criteria){err?callback(err):callback(null,{value:x,criteria:criteria})})},function(err,results){if(err)return callback(err);callback(null,_map(results.sort(comparator),function(x){return x.value}))})},async.auto=function(tasks,concurrency,callback){function addListener(fn){listeners.unshift(fn)}function removeListener(fn){var idx=_indexOf(listeners,fn);idx>=0&&listeners.splice(idx,1)}function taskComplete(){remainingTasks--,_arrayEach(listeners.slice(0),function(fn){fn()})}"function"==typeof arguments[1]&&(callback=concurrency,concurrency=null),callback=_once(callback||noop);var keys=_keys(tasks),remainingTasks=keys.length;if(!remainingTasks)return callback(null);concurrency||(concurrency=remainingTasks);var results={},runningTasks=0,hasError=!1,listeners=[];addListener(function(){remainingTasks||callback(null,results)}),_arrayEach(keys,function(k){function ready(){return runningTasks<concurrency&&_reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},!0)&&!results.hasOwnProperty(k)}function listener(){ready()&&(runningTasks++,removeListener(listener),task[task.length-1](taskCallback,results))}if(!hasError){for(var dep,task=_isArray(tasks[k])?tasks[k]:[tasks[k]],taskCallback=_restParam(function(err,args){if(runningTasks--,args.length<=1&&(args=args[0]),err){var safeResults={};_forEachOf(results,function(val,rkey){safeResults[rkey]=val}),safeResults[k]=args,hasError=!0,callback(err,safeResults)}else results[k]=args,async.setImmediate(taskComplete)}),requires=task.slice(0,task.length-1),len=requires.length;len--;){if(!(dep=tasks[requires[len]]))throw new Error("Has nonexistent dependency in "+requires.join(", "));if(_isArray(dep)&&_indexOf(dep,k)>=0)throw new Error("Has cyclic dependencies")}ready()?(runningTasks++,task[task.length-1](taskCallback,results)):addListener(listener)}})},async.retry=function(times,task,callback){function wrappedTask(wrappedCallback,wrappedResults){for(;opts.times;){var finalAttempt=!(opts.times-=1);attempts.push(function(task,finalAttempt){return function(seriesCallback){task(function(err,result){seriesCallback(!err||finalAttempt,{err:err,result:result})},wrappedResults)}}(opts.task,finalAttempt)),!finalAttempt&&opts.interval>0&&attempts.push(function(interval){return function(seriesCallback){setTimeout(function(){seriesCallback(null)},interval)}}(opts.interval))}async.series(attempts,function(done,data){data=data[data.length-1],(wrappedCallback||opts.callback)(data.err,data.result)})}var DEFAULT_TIMES=5,DEFAULT_INTERVAL=0,attempts=[],opts={times:DEFAULT_TIMES,interval:DEFAULT_INTERVAL},length=arguments.length;if(length<1||length>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return length<=2&&"function"==typeof times&&(callback=task,task=times),"function"!=typeof times&&function(acc,t){if("number"==typeof t)acc.times=parseInt(t,10)||DEFAULT_TIMES;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);acc.times=parseInt(t.times,10)||DEFAULT_TIMES,acc.interval=parseInt(t.interval,10)||DEFAULT_INTERVAL}}(opts,times),opts.callback=callback,opts.task=task,opts.callback?wrappedTask():wrappedTask},async.waterfall=function(tasks,callback){function wrapIterator(iterator){return _restParam(function(err,args){if(err)callback.apply(null,[err].concat(args));else{var next=iterator.next();next?args.push(wrapIterator(next)):args.push(callback),ensureAsync(iterator).apply(null,args)}})}if(callback=_once(callback||noop),!_isArray(tasks)){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length)return callback();wrapIterator(async.iterator(tasks))()},async.parallel=function(tasks,callback){_parallel(async.eachOf,tasks,callback)},async.parallelLimit=function(tasks,limit,callback){_parallel(_eachOfLimit(limit),tasks,callback)},async.series=function(tasks,callback){_parallel(async.eachOfSeries,tasks,callback)},async.iterator=function(tasks){function makeCallback(index){function fn(){return tasks.length&&tasks[index].apply(null,arguments),fn.next()}return fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null},fn}return makeCallback(0)},async.apply=_restParam(function(fn,args){return _restParam(function(callArgs){return fn.apply(null,args.concat(callArgs))})}),async.concat=doParallel(_concat),async.concatSeries=doSeries(_concat),async.whilst=function(test,iterator,callback){if(callback=callback||noop,test()){var next=_restParam(function(err,args){err?callback(err):test.apply(this,args)?iterator(next):callback.apply(null,[null].concat(args))});iterator(next)}else callback(null)},async.doWhilst=function(iterator,test,callback){var calls=0;return async.whilst(function(){return++calls<=1||test.apply(this,arguments)},iterator,callback)},async.until=function(test,iterator,callback){return async.whilst(function(){return!test.apply(this,arguments)},iterator,callback)},async.doUntil=function(iterator,test,callback){return async.doWhilst(iterator,function(){return!test.apply(this,arguments)},callback)},async.during=function(test,iterator,callback){callback=callback||noop;var next=_restParam(function(err,args){err?callback(err):(args.push(check),test.apply(this,args))}),check=function(err,truth){err?callback(err):truth?iterator(next):callback(null)};test(check)},async.doDuring=function(iterator,test,callback){var calls=0;async.during(function(next){calls++<1?next(null,!0):test.apply(this,arguments)},iterator,callback)},async.queue=function(worker,concurrency){return _queue(function(items,cb){worker(items[0],cb)},concurrency,1)},async.priorityQueue=function(worker,concurrency){function _compareTasks(a,b){return a.priority-b.priority}function _binarySearch(sequence,item,compare){for(var beg=-1,end=sequence.length-1;beg<end;){var mid=beg+(end-beg+1>>>1);compare(item,sequence[mid])>=0?beg=mid:end=mid-1}return beg}function _insert(q,data,priority,callback){if(null!=callback&&"function"!=typeof callback)throw new Error("task callback must be a function");if(q.started=!0,_isArray(data)||(data=[data]),0===data.length)return async.setImmediate(function(){q.drain()});_arrayEach(data,function(task){var item={data:task,priority:priority,callback:"function"==typeof callback?callback:noop};q.tasks.splice(_binarySearch(q.tasks,item,_compareTasks)+1,0,item),q.tasks.length===q.concurrency&&q.saturated(),async.setImmediate(q.process)})}var q=async.queue(worker,concurrency);return q.push=function(data,priority,callback){_insert(q,data,priority,callback)},delete q.unshift,q},async.cargo=function(worker,payload){return _queue(worker,1,payload)},async.log=_console_fn("log"),async.dir=_console_fn("dir"),async.memoize=function(fn,hasher){var memo={},queues={},has=Object.prototype.hasOwnProperty;hasher=hasher||identity;var memoized=_restParam(function(args){var callback=args.pop(),key=hasher.apply(null,args);has.call(memo,key)?async.setImmediate(function(){callback.apply(null,memo[key])}):has.call(queues,key)?queues[key].push(callback):(queues[key]=[callback],fn.apply(null,args.concat([_restParam(function(args){memo[key]=args;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++)q[i].apply(null,args)})])))});return memoized.memo=memo,memoized.unmemoized=fn,memoized},async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}},async.times=_times(async.map),async.timesSeries=_times(async.mapSeries),async.timesLimit=function(count,limit,iterator,callback){return async.mapLimit(_range(count),limit,iterator,callback)},async.seq=function(){var fns=arguments;return _restParam(function(args){var that=this,callback=args[args.length-1];"function"==typeof callback?args.pop():callback=noop,async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([_restParam(function(err,nextargs){cb(err,nextargs)})]))},function(err,results){callback.apply(that,[err].concat(results))})})},async.compose=function(){return async.seq.apply(null,Array.prototype.reverse.call(arguments))},async.applyEach=_applyEach(async.eachOf),async.applyEachSeries=_applyEach(async.eachOfSeries),async.forever=function(fn,callback){function next(err){if(err)return done(err);task(next)}var done=only_once(callback||noop),task=ensureAsync(fn);next()},async.ensureAsync=ensureAsync,async.constant=_restParam(function(values){var args=[null].concat(values);return function(callback){return callback.apply(this,args)}}),async.wrapSync=async.asyncify=function(func){return _restParam(function(args){var result,callback=args.pop();try{result=func.apply(this,args)}catch(e){return callback(e)}_isObject(result)&&"function"==typeof result.then?result.then(function(value){callback(null,value)}).catch(function(err){callback(err.message?err:new Error(err))}):callback(null,result)})},"object"==typeof module&&module.exports?module.exports=async:"function"==typeof define&&define.amd?define([],function(){return async}):root.async=async}()}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:9}],9:[function(require,module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}
function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],10:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},{}],11:[function(require,module,exports){"use strict";function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},{}],12:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":10,"./encode":11}]},{},[1]);